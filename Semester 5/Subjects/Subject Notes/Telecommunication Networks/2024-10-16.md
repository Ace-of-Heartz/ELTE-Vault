# Gyak.:
**Kód könyvtár**:
- küldőnek és fogadónak is kell ismernie
- valid kódszavak halmaza
**Hamming-távolság**: 
pl. 
$$
\begin{matrix}
0000 : Kezdeti\ kódszó\ \ \ \ \ \ \ \ \ \ \ \ \ \ \\
0001 : 1\ Hamming-távolság\\ 
\dots \\
1111 : 4\ Hamming-távolság
\end{matrix}
$$
## Hibák és javítások: 
Hiba Pl.: $K: 0101 \to F:0111$ 
### Paritás bit:
Kiegészítése a kódszónak 1|0-val, ú.h. az 1-esek száma páros legyen
$$
\begin{matrix}
0000|0\ - Kezdeti\ kódszó\  \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \  \\ 
0001|1 \to 2\ Hamming-távolság\ lett\\
\dots \\
1111|0 \to 4\ Hamming-távolság\\

\end{matrix}
$$
**Így**: 1 hibajelző

### Másik megoldás: *Mátrixos reprezentáció*
$$
\frac{\begin{matrix}
1 0 1 \\
1 1 1 \\
\end{matrix}}
{010}  
$$
Alsó sor a paritásbitek sora.
- *Egyszerű bithiba* esetén ugyanolyan erősségű, mint az egyszerű paritásbit
- *Löketszerű bithiba* esetén sokkal jobb. Fenti példánál 6 bit hiba kell ahhoz, hogy ne jelezzen.

### Harmadik megoldás:
$$
\frac{\begin{matrix}
1 0 1|0 \\
111|1 \\
\end{matrix}}
{010\ \ \ }
$$
Paritásbit utolsó sor és utolsó oszlopban is!
Ez már *hibajavításra* is alkalmas, nem csak detektálásra.
Ugyanúgy *löketszerű bithibára* alkalmas elsősorban.

## CRC: Cyclic Redundancy Check
- Alapvetően a hálózatnak a hiba detektálás a feladata, nem pedig annak javítása
- Csomagok ellenörző összegekkel vannak ellátva

**CRC lépései**: 
1. Polinomok használata (*generátor polinom*): pl. $g(x) = x^3 + x^2 + 1$ ~ $1101$ 
	-  Ezt a polinomot a küldő és fogadó is tudja (ált. szabvány)
2. Legyen most: $M(x) = x^5 + x^3 + 1$ ~ 101001
3. Küldés: 
	1. Egészítsük ki a bitsorozatot a *generátor polinom* ( $g(x)$ ) fokszámú mennyiségű 0-val: 101001*000* -> $x^r * M(x)$, ahol $r$ a $g(x)$ polinom foka
	2. $O(x) = x^r * M(x) \mod g(x)$ 
	3. Ami ténylegesen át lesz küldve: $T(x) = x^r * M(x) + O(x)$ -> ezzel visszaírtuk a padding *000*-jába $O(x)$-et, azaz egy maradékot
	4. Így ő is egy polinom lesz.
4. Fogadás:
	1. $E(x) = x$ ~ hiba, ő is egy polinomnak fogható fel
	2. amit fogadunk, az egy hibával/zajjal telített bitsorozat lesz:
		- $T(x) + E(x) = m(x)$ 
	3. $m(x)\mod g(x)$ 
		- **ha** ($= 0$), **akkor**: nem történt hiba
		- **ha** ($\neq 0$), **akkor**: hiba történt

### Gyakorló feladat:
- $1100101011101100$ ~ a bitsorozat
- $11011$ ~ a generátor polinom: $x^4+ x + 1$ 

1. $1100101011101100 + 0000$
2. Maradék számítása:  ![[Pasted image 20241016092532.png]]

**Mikor nem detektáljuk a hibát?**: Ha a *generátor polinom* többszöröse a hiba

# Előadás


## Ütközés detektálás (CD)

*CD* = *Collision Detection*

**Motiváció**: ütközés érzékelés esetén meg lehessen szakítani az adást
- Minden állomás küldés közben megfigyeli a csatornát
- **Ha ütközést tapasztal**:
	1. megszakítja az adást
	2. véletlen ideig várakozik
	3. újra elkezdi leadni a keretét

**Mikor lehet az állomás biztos abban, hogy megszerezte magának a csatornát?**
- **Legyen** az ütközés detektálás minimális ideje az az idő, ami egy jelnek a két legtávolabbi állomás közti átviteléhez szükséges
- Egy állomás megszerezte a csatornát, ha minden más állomás érzékeli az átvitelét

**Ütközést detektálás működéséhez** szükséges a keretek hosszára egy alsó korlát
Pl. Ethernet a CSMA/CD-t használja

## CSMA/CD 

*Carrier Sense Multiple Access with Collision Detection*

**Alapvetés**: közeg lehetőséget ad a csatornába való belehallgatásba

**Algoritmus**:
1. CSMA variáns használata
2. Keret kiküldése után közeg figyelése: történik-e ütközés?
3. Nem volt ütközés => Keretet leszállítottuk
4. Ütközés történt => Azonnal megszakítjuk a küldést
5. Alkalmazzuk a *bináris exponenciális hátralék módszert* az újraküldés során (*binary exponential backoff*)

### Bináris exponenciálsi hátralék

Ütközés érzékelésekor a küldő ún. *jam* jelet küld, hogy minden állomás tudomást szerezzen az ütközésről.

**Működése**:
1. $k \in [0,2^{n-1}]$ választása egyenletes eloszlás szerint
	- $n$ = ütközések száma
2. $k$ időegység (keretidő) várakozás az újraküldésig
3. $n$ felső határa 10
4. 16 sikertelen próbálkozás után eldobjuk a keretet

**Hátralék idő versengési résekre van osztva.**


#### Egy példa

Tekintsünk 2 állomást, amelynek üzenetei ütköztek

1. **Első ütközés után**: két időrés közül válasszunk egyet
	- Sikeres átvitel esélye: $50\%$ 
	- Átlagos várakozási idő: $1.5$ időrés
2. **Második ütközés után**: négy időrés közül válasszunk egyet
	- Sikeres átvitel esélye: $75\%$
	- Átlagos várakozási idő: $2.5$ időrés
3. **Általában $m.$ ütközés után**: 
	- Sikeres átvitel esélye: $1-2^{-m}$
	- Átlagos várakozási idő: $0.5 + 2^{m-1}$ 